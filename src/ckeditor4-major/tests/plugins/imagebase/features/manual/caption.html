<head>
	<link href="/apps/ckeditor/contents.css" rel="stylesheet">
</head>
<body>
<h2>Classic editor</h2>

<div id="classic">
	<p>Widget without caption:</p>
	<figure>
		<img alt="foo" src="../../../image2/_assets/foo.png">
	</figure>
	<p>Widget with empty caption:</p>
	<figure>
		<a href="https://cksource.com">
			<img alt="foo" src="../../../image2/_assets/foo.png">
		</a>
		<figcaption></figcaption>
	</figure>
	<p>Widget with caption:</p>
	<figure>
		<a href="https://cksource.com">
			<img alt="foo" src="../../../image2/_assets/foo.png">
		</a>
		<figcaption>Test caption</figcaption>
	</figure>
</div>

<h2>Divarea editor</h2>

<div id="divarea">
	<p>Widget without caption:</p>
	<figure>
		<img alt="foo" src="../../../image2/_assets/foo.png">
	</figure>
	<p>Widget with empty caption:</p>
	<figure>
		<a href="https://cksource.com">
			<img alt="foo" src="../../../image2/_assets/foo.png">
		</a>
		<figcaption></figcaption>
	</figure>
	<p>Widget with caption:</p>
	<figure>
		<a href="https://cksource.com">
			<img alt="foo" src="../../../image2/_assets/foo.png">
		</a>
		<figcaption>Test caption</figcaption>
	</figure>
</div>

<h2>Inline editor</h2>

<div contenteditable="true" id="inline">
	<p>Widget without caption:</p>
	<figure>
		<img alt="foo" src="../../../image2/_assets/foo.png">
	</figure>
	<p>Widget with empty caption:</p>
	<figure>
		<a href="https://cksource.com">
			<img alt="foo" src="../../../image2/_assets/foo.png">
		</a>
		<figcaption></figcaption>
	</figure>
	<p>Widget with caption:</p>
	<figure>
		<a href="https://cksource.com">
			<img alt="foo" src="../../../image2/_assets/foo.png">
		</a>
		<figcaption>Test caption</figcaption>
	</figure>
</div>

<script>
	(function () {
		'use strict';

		bender.tools.ignoreUnsupportedEnvironment('easyimage');

		var commonConfig = {
			on: {
				pluginsLoaded: function (evt) {
					var editor = evt.editor,
						plugin = CKEDITOR.plugins.imagebase;

					plugin.addImageWidget(editor, 'testWidget', plugin.addFeature(editor, 'caption', {}));
				}
			},
			height: 500
		};

		CKEDITOR.replace('classic', commonConfig);
		CKEDITOR.replace('divarea', CKEDITOR.tools.object.merge(commonConfig, {
			extraPlugins: 'divarea'
		}));
		CKEDITOR.inline('inline', commonConfig);
	}());
</script>
</body>
